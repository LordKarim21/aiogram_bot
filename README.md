# aiogram_bot
# Telegram-бот для поиска отелей

Данный бот позволяет подбирать отели в соответствии с Вашими критериями поиска.

## Функционал бота

С помощью данного бота Вы можете:

- подобрать отели по самой низкой или высокой цене;
- подобрать отели по лучшему соотношению цена/расстояние от центра города;
- запросить историю запросов.

По каждому отелю бот выводит следующие данные:

- Название отеля;
- Сайт отеля;
- Адрес отеля;
- Удаленность от центра в км;
- Период проживания, который ввел пользователь;
- Стоимость проживания за определнный период;
- Стоимость проживания за ночь.

## Requirements

- Python 3.8+
- peewee==3.15.4
- PyMySQL==1.0.2
- pyTelegramBotAPI==4.4.0
- python-dotenv==0.19.2
- python-telegram-bot-calendar==1.0.5
- requests==2.28.1
- Pillow==9.2.0

Для установки вышеприведенных библиотек выполните следующую команду: pip install -r requirements.txt

## Команды бота

- /start - запуск бота, выполняется автоматически при подключении к боту.
- /help - список команд и их описание
- /lowprice — вывод самых дешёвых отелей в городе;
- /highprice — вывод самых дорогих отелей в городе;
- /bestdeal — вывод отелей, наиболее подходящих по цене и расположению от центра;
- /history — вывод истории поиска отелей.
- /clear_history - очистка истории

### Описание команд телеграм-бота

#### Поиск самых дешевых отелей (/lowprice)

1. При вводе команды /lowprice Бот запрашивает город, в котором Вы хотите найти отели.
2. Далее пользователь вводит название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций,
   названия которых похожи на введенный город. Если бот не найдет ни одну локацию, то необходимо ввести название города
   еще раз, возможно пользователь допустил ошибку при вводе.
3. Затем пользователь выбирает дату въезда и выезда.
4. Далее запрашивается кол-во отелей, которое необходимо вывести.
5. После бот спрашивает у пользователя, нужно ли вывести фотографии отеля.
6. В случае положительного ответа бот отправляет пользователю альбом (в случае, если фото > 1) фотографии с информацией
   (см. выше) по каждому найденному отелю.

#### Поиск самых дорогих отелей (/highprice)

1. При вводе команды /highprice Бот запрашивает город, в котором Вы хотите найти отели.
2. Далее пользователь вводит название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций,
   названия которых похожи на введенный город. Если бот не найдет ни одну локацию, то необходимо ввести название города
   еще раз, возможно пользователь допустил ошибку при вводе.
3. Затем пользователь выбирает дату въезда и выезда.
4. Далее запрашивается кол-во отелей, которое необходимо вывести.
5. После бот спрашивает у пользователя, нужно ли вывести фотографии отеля.
6. В случае положительного ответа бот отправляет пользователю альбом (в случае, если фото > 1) фотографии с информацией
   (см. выше) по каждому найденному отелю.

#### Поиск Лучших предложений (/bestdeal)

1. При вводе команды /bestdeal Бот запрашивает город, в котором Вы хотите найти отели.
2. Далее пользователь вводит название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций,
   названия которых похожи на введенный город. Если бот не найдет ни одну локацию, то необходимо ввести название города
   еще раз, возможно пользователь допустил ошибку при вводе.
3. После пользователь задает диапазон цен, а также значение удаленности отелей от центра в км.
4. Далее запрашивается кол-во отелей, которое необходимо вывести.
5. Затем пользователь выбирает дату въезда и выезда.
6. После определения дат въезда и выезда бот спрашивает у пользователя, нужно ли вывести фотографии отеля.
7. В случае положительного ответа бот отправляет пользователю альбом (в случае, если фото > 1) фотографии с информацией
   (см. выше) по каждому найденному отелю.
   
#### История запросов (/history)
При вводе команды /history пользователь получает историю ВСЕХ своих запросов.

#### История запросов (/clear_history)
При вводе команды /clear_history пользователь очищает историю ВСЕХ своих запросов.